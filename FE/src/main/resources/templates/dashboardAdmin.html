<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
            href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
            rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
          integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" th:href="@{/css/adminPage.css}" />
    <link rel="stylesheet" th:href="@{/css/dashboard.css}" />
<!--Đường dẫn thư viện chart    -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<div class="container">
    <!-- Include Sidebar -->
    <section th:include="adminPage"></section>

    <!-- Main Dashboard Content -->
    <div class="main-content">
        <div class="page-title">
            <i class="fa-solid fa-chart-line"></i>
            <h1>Dashboard</h1>
        </div>

        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon product-selling-icon">
                    <i class="fa-solid fa-store"></i>
                </div>
                <div class="stat-info">
                    <h3>Sản phẩm đang bán</h3>
                    <p class="stat-number" th:text="${postCount}">1,250</p>
<!--                    <a href="#" class="stat-link">Xem chi tiết <i class="fa-solid fa-arrow-right"></i></a>-->
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon product-sold-icon">
                    <i class="fa-solid fa-check-circle"></i>
                </div>
                <div class="stat-info">
                    <h3>Sản phẩm đã bán</h3>
                    <p class="stat-number" th:text="${postSoldCount}">3,480</p>
<!--                    <a href="#" class="stat-link">Xem chi tiết <i class="fa-solid fa-arrow-right"></i></a>-->
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon user-icon">
                    <i class="fa-solid fa-users"></i>
                </div>
                <div class="stat-info">
                    <h3>Tổng số người dùng</h3>
                    <p class="stat-number" th:text="${userCount}">10,500</p>
<!--                    <a href="#" class="stat-link">Xem chi tiết <i class="fa-solid fa-arrow-right"></i></a>-->
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon commission-icon">
                    <i class="fa-solid fa-percentage"></i>
                </div>
                <div class="stat-info">
                    <h3>Doanh thu hoa hồng</h3>
                    <p class="stat-number" th:text="${#numbers.formatDecimal(totalCommissionRevenue / 1000000, 1, 1)} + 'M VNĐ'">₫45.2M</p>
<!--                    <a href="#" class="stat-link">Xem chi tiết <i class="fa-solid fa-arrow-right"></i></a>-->
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon package-revenue-icon">
                    <i class="fa-solid fa-box"></i>
                </div>
                <div class="stat-info">
                    <h3>Doanh thu gói phí</h3>
                    <p class="stat-number" th:text="${#numbers.formatDecimal(totalMembershipRevenue / 1000000, 1, 1)} + 'M VNĐ'">₫28.7M</p>
<!--                    <a href="#" class="stat-link">Xem chi tiết <i class="fa-solid fa-arrow-right"></i></a>-->
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon battery-post-icon">
                    <i class="fa-solid fa-battery-full"></i>
                </div>
                <div class="stat-info">
                    <h3>Bài bán pin</h3>
                    <p class="stat-number" th:text="${batteryCount}">892</p>
<!--                    <a href="#" class="stat-link">Xem chi tiết <i class="fa-solid fa-arrow-right"></i></a>-->
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon vehicle-post-icon">
                    <i class="fa-solid fa-motorcycle"></i>
                </div>
                <div class="stat-info">
                    <h3>Bài bán xe</h3>
                    <p class="stat-number" th:text="${vehicleCount}">1,658</p>
<!--                    <a href="#" class="stat-link">Xem chi tiết <i class="fa-solid fa-arrow-right"></i></a>-->
                </div>
            </div>
        </div>


        <!-- Tables Section -->
        <div class="tables-section">
            <div class="table-card">
                <div class="table-header">
                    <h3>Các bài đăng mới nhất cần duyệt:</h3>
                </div>
                <div class="data-table">
                    <table>
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Tên bài đăng</th>
                            <th>Thời gian</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="post:${latestPosts}">
                            <td th:text="${post.getPostsId()}">Đăng bài mới</td>
                            <td th:text="${post.getTitle()}">Nguyễn Văn A</td>
                            <td th:text="${#temporals.format(post.getCreatedAt(),'dd-MM-yyyy')}">5 phút trước</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <h3>Các giao dịch mới gần đây:</h3>
                </div>
                <div class="data-table">
                    <table>
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Loại sản phẩm</th>
                            <th>Ngày</th>
                            <th>Trạng thái</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="transaction : ${latestTransactions}">
                            <td th:text="${transaction.getTransactionId()}">Honda Wave Alpha</td>
                            <td th:text="${transaction.getPost().getProduct().getProductType()}">#KH001</td>
                            <td th:text="${#temporals.format(transaction.getCreatedAt(),'dd-MM-yyyy')}">08/11/2025</td>
                            <td><span class="status-badge pending">Yêu cầu người mua chấp nhận</span></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>

<script th:src="@{/js/adminPage.js}"></script>
<script th:src="@{/js/dashboard.js}"></script>

</body>

</html>